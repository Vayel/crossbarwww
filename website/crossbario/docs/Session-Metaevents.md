Crossbar.io supports WAMP *metaevents*. These are events generated by the router itself.

When a **new WAMP session joins** a realm on the router, a metaevent

    wamp.metaevent.session.on_join

will be generated.

When a **WAMP session leaves** a realm on the router, a metaevent

    wamp.metaevent.session.on_leave

will be generated.

The WAMP session meta events are dispatched by the router to the *same realm* as the WAMP session was joining or leaving.

**Important**: To receive and process these events, your component will need to have *subscribe* permission on the respective topic (see the example configuration below).

## Example

Here is usage from Python:

```python
from twisted.internet.defer import inlineCallbacks
from autobahn.twisted.wamp import ApplicationSession

class MySessionMonitor(ApplicationSession):

   @inlineCallbacks
   def onJoin(self, details):

      ## session metaevents: these are fired by Crossbar.io
      ## upon _other_ WAMP sessions joining/leaving the router
      ##
      @inlineCallbacks
      def on_session_join(details):
         print("on_session_join: {}".format(details))

      yield self.subscribe(on_session_join, 'wamp.metaevent.session.on_join')


      @inlineCallbacks
      def on_session_leave(details):
         print("on_session_leave: {}".format(details))

      yield self.subscribe(on_session_leave, 'wamp.metaevent.session.on_leave')
```

To test:

```html
<!DOCTYPE html>
<html>
   <body>
      <h1>Hello WAMP</h1>
      <p>Open JavaScript console to watch output.</p>
      <script>AUTOBAHN_DEBUG = true;</script>
      <script src="https://autobahn.s3.amazonaws.com/autobahnjs/latest/autobahn.min.jgz">
      </script>
      <script>
         var connection = new autobahn.Connection({
            url: "ws://127.0.0.1:8080/ws",
            realm: "realm1"
         });

         connection.onopen = function (session, details) {
            console.log("Connected");
         };

         connection.onclose = function (reason, details) {
            console.log("Connection lost: " + reason);
         }

         connection.open();
      </script>
   </body>
</html>
```

Using this Crossbar.io configuration:

```json
{
   "controller": {
   },
   "workers": [
      {
         "type": "router",
         "options": {
            "pythonpath": [".."]
         },
         "realms": [
            {
               "name": "realm1",
               "roles": [
                  {
                     "name": "anonymous",
                     "permissions": [
                        {
                           "uri": "com.example.*",
                           "publish": true,
                           "subscribe": true,
                           "call": true,
                           "register": true
                        }
                     ]
                  },
                  {
                     "name": "monitor",
                     "permissions": [
                        {
                           "uri": "wamp.metaevent.session.*",
                           "subscribe": true
                        }
                     ]
                  }
               ]
            }
         ],
         "transports": [
            {
               "type": "web",
               "endpoint": {
                  "type": "tcp",
                  "port": 8080
               },
               "paths": {
                  "/": {
                     "type": "static",
                     "directory": "../web"
                  },
                  "ws": {
                     "type": "websocket"
                  }
               }
            }
         ],
         "components": [
            {
               "type": "class",
               "classname": "monitor.MySessionMonitor",
               "realm": "realm1",
               "role": "monitor"
            }
         ]
      }
   ]
}
```
